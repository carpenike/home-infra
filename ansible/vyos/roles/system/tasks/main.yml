---
# tasks file for system
- name: Set hostname
  vyos_system:
    host_name: "{{ inventory_hostname }}"

- name: Remove unneeded banners
  vyos_banner:
    banner: "{{ item }}"
    state: absent
  loop:
  - post-login

- name: Update login banner
  vyos_banner:
    banner: pre-login
    text: |
      ----------------------------------------
      |
      | This banner was generated by Ansible 
      |
      ----------------------------------------
      |
      | You are logged into {{ inventory_hostname }}
      | 
      ----------------------------------------
      |   
    state: present

- name: Configure syslog
  vyos_config:
    lines:
      - "set system syslog host {{ KUBERNETES.SYSLOG.ENDPOINT }} facility all level all"
      - "set system syslog host {{ KUBERNETES.SYSLOG.ENDPOINT }} port {{ KUBERNETES.SYSLOG.PORT }}"
